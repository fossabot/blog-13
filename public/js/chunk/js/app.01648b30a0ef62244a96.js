(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+lRy":function(t,e){},0:function(t,e,n){n("JO1w"),n("+lRy"),t.exports=n("BLqG")},BLqG:function(t,e){},JO1w:function(t,e,n){"use strict";n.r(e);var i=n("vDqi"),o=n.n(i),s=(n("SYky"),n("sxGJ")),a=n.n(s),r=n("EVdn"),c=n.n(r),d=n("Vjiq"),u=n("8L3F");n("eC5B");window.$=window.jQuery=c.a,window.PopperJs=u.default.default,new a.a("[data-clipboard-target]"),window.axios=o.a,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var l=document.head.querySelector('meta[name="csrf-token"]');l?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=l.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");var m=document.head.querySelector('meta[name="api-token"]');m&&(window.axios.defaults.headers.common.Authorization="Bearer "+m.content),window.Echo=new d.a({broadcaster:"pusher",key:"",cluster:"mt1",encrypted:!0});var p={props:{postId:{type:Number,required:!0},placeholder:{type:String,default:null},button:{type:String,required:!0}},data:function(){return{content:"",isLoading:!1,errors:[]}},computed:{isDisabled:function(){return this.isLoading||0===this.content.length}},methods:{sendComment:function(){var t=this;this.isLoading=!0,o.a.post("/api/v1/posts/".concat(this.postId,"/comments"),{content:this.content}).then((function(e){var n=e.data;Event.$emit("added",n.data),t.content="",t.isLoading=!1,t.errors=[]})).catch((function(e){t.isLoading=!1,t.errors=e.response.data.errors}))}}},f=n("KHd+"),h=Object(f.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",class:{"is-invalid":t.errors.content},attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),t.errors.content?n("span",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.content[0]))]):t._e()]),t._v(" "),n("div",{staticClass:"form-group text-right"},[n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDisabled},on:{click:t.sendComment}},[t.isLoading?n("i",{staticClass:"fa fa-spinner fa-spin fa-fw"}):t._e(),t._v("\n      "+t._s(t.button)+"\n    ")])])])}),[],!1,null,null,null).exports,v={props:{comment:{type:Object,required:!0},dataConfirm:{type:String,required:!0}},methods:{deleteComment:function(){var t=this;confirm(this.dataConfirm)&&o.a.delete("/api/v1/comments/".concat(this.comment.id)).then((function(){t.$emit("deleted",t)})).catch((function(t){console.log(t)}))}}};function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C={components:{Comment:Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card mb-2"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title d-flex justify-content-between"},[n("h6",[n("a",{attrs:{href:t.comment.author_url}},[t._v(t._s(t.comment.author_name))])]),t._v(" "),t.comment.can_delete?n("button",{staticClass:"close text-danger",on:{click:t.deleteComment}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]):t._e()]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("\n      "+t._s(t.comment.content)+"\n    ")]),t._v(" "),n("p",{staticClass:"card-text"},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.comment.humanized_published_at))])])])])}),[],!1,null,null,null).exports},props:{postId:{type:Number,required:!0},loadingComments:{type:String,required:!0},dataConfirm:{type:String,required:!0}},data:function(){return{comments:[],isLoading:!1,endpoint:"/api/v1/posts/".concat(this.postId,"/comments/")}},mounted:function(){var t=this;this.retrieveComments(),Event.$on("added",(function(e){return t.addComment(e)})),window.Echo.channel("post.".concat(this.postId)).listen(".comment.posted",(function(e){return t.addComment(e.comment)}))},methods:{retrieveComments:function(){var t=this;this.isLoading=!0,o.a.get(this.endpoint).then((function(e){var n,i=e.data;(n=t.comments).push.apply(n,g(i.data)),t.isLoading=!1,t.endpoint=i.links.next}))},addComment:function(t){this.comments.unshift(t)},removeComment:function(t){var e=t.id;this.comments.splice(this.comments.findIndex((function(t){return t.id===e})),1)}}},_=Object(f.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.comments,(function(e){return n("comment",{key:e.id,attrs:{comment:e,"data-confirm":t.dataConfirm},on:{deleted:function(n){return t.removeComment(e)}}})})),t._v(" "),t.endpoint?n("button",{staticClass:"btn btn-outline-primary btn-block",attrs:{disabled:t.isLoading},on:{click:t.retrieveComments}},[t.isLoading?n("i",{staticClass:"fa fa-spinner fa-spin fa-fw"}):t._e(),t._v("\n    "+t._s(t.loadingComments)+"\n  ")]):t._e()],2)}),[],!1,null,null,null).exports,w={props:{liked:{type:Boolean,required:!0},likesCount:{type:Number,required:!0},itemType:{type:String,required:!0},itemId:{type:Number,required:!0},loggedIn:{type:Boolean,required:!0}},data:function(){return{isLiked:this.liked,isLoggedIn:this.loggedIn,count:this.likesCount,endpoint:"/api/v1/".concat(this.itemType,"/").concat(this.itemId,"/likes"),isLoading:!1}},methods:{toggleLike:function(){if(!this.isLoading&&this.isLoggedIn)return this.isLiked?this.dislike():void this.like()},like:function(){var t=this;this.isLoading=!0,o.a.post(this.endpoint).then((function(e){t.isLoading=!1,t.isLiked=!0,t.count++})).catch((function(){t.isLoading=!1}))},dislike:function(){var t=this;this.isLoading=!0,o.a.delete(this.endpoint).then((function(e){t.isLoading=!1,t.isLiked=!1,t.count--})).catch((function(){t.isLoading=!1}))}}},b=Object(f.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa ml-2",class:[this.isLiked?"fa-heart text-danger":"fa-heart-o"],staticStyle:{"user-select":"none"},style:[this.isLoggedIn?{cursor:"pointer"}:""],attrs:{"aria-hidden":"true"},on:{click:this.toggleLike}}),this._v(" "+this._s(this.count)+"\n")])}),[],!1,null,null,null).exports,y=n("XuX8"),L=n.n(y);L.a.config.productionTip=!1,window.Event=new L.a,new L.a({el:"#app",components:{CommentForm:h,CommentList:_,Like:b},mounted:function(){var t=this;$("[data-confirm]").on("click",(function(){return confirm($(t).data("confirm"))}))}})}},[[0,0,1]]]);